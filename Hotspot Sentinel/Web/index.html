<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Proyecto SAR — Análisis Multibanda y Multipolarización</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css" />
    <!-- PapaParse for robust CSV parsing and Leaflet.markercluster for clustering many points -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
  </head>
  <body>
    <header class="site-header">
      <div class="container">
        <div class="header-row">
          <div class="nasa-badge" aria-hidden="true"><span class="badge-circle">SPACE</span></div>
          <div>
            <h1>SAR Project 
              <span style="font-size:0.85rem;display:block;color:rgba(230,238,246,0.85);">Multiband & Multipolarization Analysis</span>
            </h1>
            <p class="lead">A professional (template) report in English to analyze SAR data across frequencies and polarizations.</p>
          </div>
        </div>
        <nav class="toc" style="margin-top:1rem;">
          <button data-target="#resumen" class="toc-btn">Summary</button>
          <button data-target="#why-sar" class="toc-btn">Why SAR?</button>
          <button data-target="#area" class="toc-btn">Study Area</button>
          <button data-target="#datasets" class="toc-btn">Datasets</button>
          <button data-target="#metodologia" class="toc-btn">Methodology</button>
          <button data-target="#hipotesis" class="toc-btn">Hypotheses</button>
          <button data-target="#recursos" class="toc-btn">Resources</button>
        </nav>
      </div>
    </header>

    <main class="container">
      <section id="resumen" class="card">
        <h2>Summary</h2>
        <p>Imagine peering through a magical lens that sees the world in ways our eyes can't—revealing hidden secrets beneath clouds, at night, or through dense forests. That's the power of Synthetic Aperture Radar (SAR) in this project. We're diving into multibanda and multipolarización data to uncover the Earth's surface processes, from flooding to vegetation health. It's like being a detective with superpowers, using different frequencies and polarizations to paint a fuller picture. This template isn't just a guide; it's your roadmap from grabbing raw data to crafting stunning visualizations, complete with scripts you can tweak and rerun. Exciting times ahead!</p>
      </section>

      <section id="why-sar" class="card">
        <h2>Why SAR? A Bit of Background</h2>
        <p>Ever wondered how we can monitor the Earth even when it's cloudy or dark? SAR is our secret weapon. Unlike optical satellites that rely on sunlight and clear skies, SAR uses radar waves to bounce off surfaces, creating images day or night, rain or shine. It's like having X-ray vision for the planet. In this project, we're exploring different bands—think of them as different colors in a palette—and polarizations, which reveal how surfaces scatter energy. From tracking floods in real-time to assessing forest health without ever stepping foot in the woods, SAR opens up a world of possibilities. And the best part? Much of this data is free and accessible, thanks to missions like Sentinel-1. Let's harness that power!</p>
      </section>

      <section id="area" class="card">
        <h2>Study Area (example)</h2>
        <p>Picture this: the Ebro Delta in Catalonia, Spain—a stunning blend of land and sea where rivers meet the Mediterranean. This dynamic region is a mosaic of wetlands teeming with life, winding channels that shift with the tides, lush vegetation, and bustling human activity from farming to tourism. It's the perfect playground for our SAR experiments, allowing us to see how C-band and L-band radars respond differently, and how polarizations like VV/VH or HH/HV reveal the secrets of water, soil, and structures. Imagine watching floods reshape the landscape or vegetation thrive—it's all here!</p>
      </section>

      <section id="datasets" class="card">
        <h2>Recommended datasets</h2>
        <p>Alright, let's talk about the stars of our show—the datasets that make this SAR magic happen. We've got a fantastic lineup:</p>
        <ul>
          <li><strong>Sentinel-1 (ESA)</strong> — Our go-to for C-band goodness, with VV and VH polarizations. It's free as a bird via Copernicus, SciHub, or AWS—perfect for everyday monitoring.</li>
          <li><strong>ALOS PALSAR (JAXA)</strong> — L-band hero, great for peeking through dense canopies and sniffing out soil secrets. A bit more exclusive, but worth the effort.</li>
          <li><strong>UAVSAR / NISAR (NASA/ISRO)</strong> — L-band wizards with multi-frequency flair when available. These are the heavy hitters for deep insights.</li>
        </ul>
        <p>Pro tip: Hunt for multi-polarization gems like VV/VH or HH/HV, and grab data from multiple dates to watch the Earth change over time. It's like having a time-lapse of the planet's heartbeat!</p>
      </section>

      <section id="metodologia" class="card">
        <h2>Methodology (summary)</h2>
        <p>Alright, let's get our hands dirty! Here's our step-by-step playbook to turn raw SAR data into insights:</p>
        <ol>
          <li><strong>Grab the goods:</strong> Download calibrated SAR products (sigma0 or gamma0) as GeoTIFFs—think of them as the raw ingredients for our recipe.</li>
          <li><strong>Crunch the numbers:</strong> Convert to dB with 10 * log10(sigma0) when needed. It's like turning volume up or down for clarity.</li>
          <li><strong>Clean it up:</strong> Apply spatial filters or denoising (optional), and align bands by reprojection/resampling. We're polishing the data to shine.</li>
          <li><strong>Mix and match:</strong> Compute comparative indices, like HV/HH ratios or L/C differences in dB. This is where the magic comparisons happen.</li>
          <li><strong>Classify away:</strong> Simple stuff like water detection via thresholding, or spotting changes between dates. It's detective work!</li>
          <li><strong>Show it off:</strong> Visualize with RGB composites, interactive web maps (folium), and layer in vectors or orthophotos for that wow factor.</li>
        </ol>
        <p>Ready to code? Here's your toolkit:</p>
        <div class="code-block">
          <pre id="cmd-example">pip install rasterio numpy matplotlib folium geopandas scikit-image</pre>
          <button class="copy-btn" data-copy="#cmd-example">Copy command</button>
        </div>
      </section>

      <section id="hipotesis" class="card">
        <h2>Hypotheses (examples)</h2>
        <ul>
          <li>Flooded areas will show very low backscatter in most C-band polarizations; L-band might show stronger returns from submerged vegetation.</li>
          <li>In dense forests, L-band (ALOS) will show higher backscatter due to canopy penetration, while C-band mainly reflects the canopy.</li>
          <li>VV/VH (or HH/HV) differences will highlight vertical structures (trees, infrastructure) versus smooth surfaces (water, bare soil).</li>
        </ul>
      </section>

      <section id="map-section" class="card">
        <h2>Interactive map (example)</h2>
        <p>The map below activates if you have an internet connection and serve raster layers (tiles) or WMS. You can use <code>gdal2tiles</code> or <code>rio-tiler</code> to create tiles from SAR GeoTIFFs.</p>
  <div id="map" style="height:400px; border-radius:8px; overflow:hidden; margin-top:0.5rem;"></div>
  <div style="margin-top:.5rem; color:#9aa6b2; font-size:.9rem;">Controls: change the base layer or add an XYZ/WMS URL in the README to view your raster. Note: serve this folder via HTTP (e.g., <code>python -m http.server</code>) to allow fetch/tiles to work properly. The smoke prediction uses a probabilistic sampling along the wind trajectory and may query Open-Meteo and Open-Elevation to refine local wind/elevation — these external calls are optional and will fall back if unavailable. The slider is debounced and lookups are cached to reduce network activity while you drag.</div>
      </section>

      <!-- Plume controls and legend moved outside the map for a cleaner view -->
      <aside id="plume-controls" class="card plume-panel">
        <h3>Smoke prediction controls</h3>
        <label style="font-size:13px;display:block;margin-bottom:6px;">Smoke prediction: <span id="smoke-minutes">120</span> min</label>
        <input id="smoke-slider" type="range" min="1" max="240" value="120" style="width:100%;">
        <div style="margin-top:6px;display:flex;gap:8px;align-items:center;"><label style="font-size:12px;margin:0;">Probabilistic</label><input id="prob-toggle" type="checkbox" checked></div>
        <div class="smoke-stats" style="margin-top:8px;"><div>Temp: <strong id="smoke-temp">—</strong>°C</div><div>Hum: <strong id="smoke-hum">—</strong>%</div></div>

        <hr style="border:none;border-top:1px solid rgba(255,255,255,0.04);margin:8px 0;"> 
        <div style="font-size:12px;margin-top:6px;">Visualization controls</div>
        <label style="font-size:12px;display:block;margin-top:6px;">Sampling step: <strong id="sample-step-val">2.50</strong> km</label>
        <input id="sample-step" type="range" min="0.25" max="10" step="0.25" value="2.50" style="width:100%;">
        <label style="font-size:12px;display:block;margin-top:6px;">Base half-width: <strong id="base-width-val">130</strong> m</label>
        <input id="base-width" type="range" min="50" max="500" step="10" value="130" style="width:100%;">
        <label style="font-size:12px;display:block;margin-top:6px;">Time coeff (m/min): <strong id="time-coeff-val">16</strong></label>
        <input id="time-coeff" type="range" min="1" max="30" step="1" value="16" style="width:100%;">
        <label style="font-size:12px;display:block;margin-top:6px;">Wind multiplier: <strong id="wind-multiplier-val">5.6</strong></label>
        <input id="wind-multiplier" type="range" min="1" max="10" step="0.1" value="5.6" style="width:100%;">
        <label style="font-size:12px;display:block;margin-top:6px;">Slope multiplier: <strong id="slope-multiplier-val">1.5</strong></label>
        <input id="slope-multiplier" type="range" min="1" max="5" step="0.1" value="1.5" style="width:100%;">
        <label style="font-size:12px;display:block;margin-top:6px;">Jitter (%): <strong id="jitter-val">27</strong></label>
        <input id="jitter" type="range" min="0" max="50" step="1" value="27" style="width:100%;">
        <label style="font-size:12px;display:block;margin-top:6px;">Dispersion slope (m per km): <strong id="disp-slope-val">163</strong> m/km</label>
        <input id="disp-slope" type="range" min="0" max="200" step="1" value="163" style="width:100%;">
        <label style="font-size:12px;display:block;margin-top:6px;">Plume opacity: <strong id="opacity-val">0.26</strong></label>
        <input id="plume-opacity" type="range" min="0.05" max="1" step="0.01" value="0.26" style="width:100%;">

        <hr style="border:none;border-top:1px solid rgba(255,255,255,0.04);margin:8px 0;"> 
        <!-- Weather chart moved here under the controls -->
        <div class="controls-chart" style="margin-top:8px;">
          <canvas id="weather-chart" width="320" height="200"></canvas>
        </div>
      </aside>

      <!-- APPEARS (NASA) hotspots controls -->
      <section id="appears-panel" class="card">
        <h3>APPEARS — Hotspots (MODIS) overlay</h3>
        <p>Introduce tu token de Earthdata y crea una tarea para descargar hotspots históricos. Usa productos como MOD14A2.061.</p>
        <div style="display:flex;gap:8px;flex-wrap:wrap;align-items:center;">
          <input id="appears-token" type="text" placeholder="Earthdata token" style="flex:1;min-width:180px;padding:.4rem;border-radius:6px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:var(--muted);" />
          <input id="appears-product" type="text" placeholder="Producto (e.g., MOD14A2.061)" value="MOD14A2.061" style="flex:1;min-width:180px;padding:.4rem;border-radius:6px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:var(--muted);" />
          <input id="appears-start-date" type="date" placeholder="Fecha inicio" style="padding:.4rem;border-radius:6px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:var(--muted);" />
          <input id="appears-end-date" type="date" placeholder="Fecha fin" style="padding:.4rem;border-radius:6px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:var(--muted);" />
          <input id="appears-bbox" type="text" placeholder="Bbox (min_lon,min_lat,max_lon,max_lat)" style="flex:1;min-width:200px;padding:.4rem;border-radius:6px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:var(--muted);" />
          <button id="appears-create-task" class="map-control-btn primary">Crear tarea</button>
          <button id="appears-check-status" class="map-control-btn ghost">Consultar estado</button>
          <button id="appears-download" class="map-control-btn primary">Descargar datos</button>
          <button id="appears-clear" class="map-control-btn ghost">Limpiar APPEARS</button>
        </div>
        <div id="appears-status" style="margin-top:8px;color:var(--muted);font-size:0.9rem;"></div>
      </section>



      <section id="weather-panel" class="card">
        <h2>Local weather & fire risk</h2>
        <p>Click on the map to get temperature, humidity and wind at that point. A simple heuristic fire-risk indicator is shown: <em>High</em>, <em>Moderate</em> or <em>Low</em>.</p>
        <div id="weather-info" class="weather-grid">
          <div class="weather-left">
            <p>Click on the map to query weather and evaluate potential fire risk.</p>
            <div id="weather-details"></div>
            <button id="download-csv" class="csv-btn">Download records (CSV)</button>
          </div>
          <div class="weather-right">
            <!-- Chart moved to plume controls for unified UI -->
          </div>
        </div>
      </section>

      <section id="recursos" class="card">
        <h2>Resources & links</h2>
        <ul>
          <li>Copernicus Open Access Hub — Sentinel-1 (C-band)</li>
          <li>Alaska Satellite Facility (ASF) — search and download (various sensors)</li>
          <li>Sentinelsat (Python) — client to download Sentinel products from Copernicus</li>
        </ul>
        <p>See the included <a href="README.md">README</a> for exact commands and reproducible steps.</p>
      </section>

      <footer class="site-footer">
        <p>Professional template for a SAR remote sensing project. Edit and use as a report or starting point for a presentation.</p>
      </footer>
    </main>

    <script src="script.js"></script>
    <!-- Load PapaParse and MarkerCluster after main script to keep original init order; script.js will detect them if available -->
    <script src="https://unpkg.com/papaparse@5.4.1/papaparse.min.js"></script>
    <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster-src.js"></script>
  </body>
</html>
